import React from "react";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import "./login.css";
import pic from "../../assets/images/Login-cuate.png";
import { faEnvelope, faLock } from "@fortawesome/free-solid-svg-icons";
import axios from "axios";
import Cookies from "universal-cookie";
import { toast } from "react-toastify";

class Login extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      email: undefined,
      password: undefined,
      hide: false,
    };
  }
  
  handleSubmit = (e) => {
    e.preventDefault();
    toast.configure();
    const loginINfo = {
      email: this.state.email,
      password: this.state.password,
    };

    axios
      .post(`http://localhost:8000/api/login`, loginINfo)
      .then((res) => {
        if (res.status === 200) {
          console.log(res.data.token);
          const cookies = new Cookies();
          cookies.set("TOKEN", res.data.token, { path: "/" });
          setInterval(() => {
            window.location.href = "/dashboard/maindash";
          }, 800);
          clearInterval();
          toast.success("Welcome");
        }
      })
      .catch((err) => toast.error(err.response.data.error));
  };

  handleChange = (e) => {
    this.setState({ [e.target.name]: e.target.value });
  };

  handleHidePass = () => {
    const icn = document.getElementById("hidePass");
    const pass = document.getElementById("password");
    if (this.state.hide === false) {
      this.setState({ hide: true });
      icn.style.color = "#1d90f5";
      pass.type = "text";
    } else {
      pass.type = "password";
      icn.style.color = "#9aa5b5";
      this.setState({ hide: false });
    }
  };
  
  render() {
    return (
      <>
        <div className="login">
          <div className="login__info">
            <span>
              <a href="/login" data--text="&nbsp;start for free">
                &nbsp;start for free&nbsp;
              </a>
            </span>
            <p>Login to your account</p>
            <form className="login__form" onSubmit={this.handleSubmit}>
              <div className="input__box">
                <label for="email">email</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  onChange={this.handleChange}
                  required
                />
                <FontAwesomeIcon
                  icon={faEnvelope}
                  className="input--icon email--icon"
                />
              </div>
              <div className="input__box">
                <label for="password">password</label>
                <input
                  type="password"
                  id="password"
                  name="password"
                  onChange={this.handleChange}
                  required
                />
                <FontAwesomeIcon
                  icon={faLock}
                  className="input--icon lock--icon"
                  onClick={this.handleHidePass}
                  id={"hidePass"}
                />
              </div>
              <button type="submit">login</button>
            </form>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="162.59"
              height="864.635"
              viewBox="0 0 162.59 864.635"
            >
              <g transform="translate(-757.864 -107.5)">
                <path
                  class="a"
                  d="M62,0S-142.654,137.956,10.769,248.943c89.752,64.927,132.7,344.817,0,442.315S-41.461,862.635-41.461,862.635"
                  transform="translate(824.5 108.5)"
                />
                <path
                  class="b"
                  d="M-41.461,863.635a1,1,0,0,1-.676-.263,50.287,50.287,0,0,1-3.571-3.782,1,1,0,0,1,.1-1.411,1,1,0,0,1,1.411.1,49.52,49.52,0,0,0,3.413,3.619,1,1,0,0,1,.06,1.413A1,1,0,0,1-41.461,863.635Zm-9.557-11.641a1,1,0,0,1-.83-.44,90.005,90.005,0,0,1-5.177-8.684,1,1,0,0,1,.424-1.349,1,1,0,0,1,1.349.424,88,88,0,0,0,5.061,8.49,1,1,0,0,1-.269,1.388A1,1,0,0,1-51.018,851.994Zm-9.227-17.7a1,1,0,0,1-.934-.643,84.1,84.1,0,0,1-3.038-9.646,1,1,0,0,1,.728-1.212,1,1,0,0,1,1.212.728,82.092,82.092,0,0,0,2.966,9.416,1,1,0,0,1-.577,1.291A1,1,0,0,1-60.245,834.295Zm-4.816-19.36a1,1,0,0,1-.992-.88,81.56,81.56,0,0,1-.582-10.1,1,1,0,0,1,1-1,1,1,0,0,1,1,1,79.514,79.514,0,0,0,.568,9.852,1,1,0,0,1-.873,1.113A1,1,0,0,1-65.061,814.935Zm.082-19.949a1.007,1.007,0,0,1-.126-.008,1,1,0,0,1-.867-1.117,89.342,89.342,0,0,1,1.84-9.939,1,1,0,0,1,1.208-.735,1,1,0,0,1,.735,1.208,87.358,87.358,0,0,0-1.8,9.715A1,1,0,0,1-64.98,794.987Zm4.7-19.4a1,1,0,0,1-.336-.059,1,1,0,0,1-.605-1.278c1.1-3.094,2.4-6.232,3.839-9.327a1,1,0,0,1,1.329-.484,1,1,0,0,1,.484,1.329c-1.416,3.039-2.684,6.12-3.769,9.155A1,1,0,0,1-60.284,775.585Zm8.4-18.118a1,1,0,0,1-.495-.132,1,1,0,0,1-.373-1.364c1.621-2.841,3.407-5.719,5.309-8.556a1,1,0,0,1,1.387-.273,1,1,0,0,1,.274,1.387c-1.876,2.8-3.636,5.634-5.233,8.433A1,1,0,0,1-51.88,757.467Zm11.107-16.614a1,1,0,0,1-.608-.206,1,1,0,0,1-.185-1.4c1.987-2.591,4.12-5.215,6.341-7.8a1,1,0,0,1,1.41-.107,1,1,0,0,1,.107,1.41c-2.2,2.556-4.306,5.151-6.27,7.713A1,1,0,0,1-40.773,740.853Zm13.01-15.175a1,1,0,0,1-.688-.274,1,1,0,0,1-.037-1.414c2.249-2.371,4.629-4.772,7.074-7.136a1,1,0,0,1,1.414.024,1,1,0,0,1-.024,1.414c-2.424,2.344-4.784,4.724-7.013,7.074A1,1,0,0,1-27.763,725.678ZM-13.4,711.77a1,1,0,0,1-.745-.333,1,1,0,0,1,.078-1.412c2.437-2.181,4.993-4.388,7.6-6.561a1,1,0,0,1,1.408.127A1,1,0,0,1-5.189,705c-2.586,2.158-5.124,4.35-7.544,6.516A1,1,0,0,1-13.4,711.77ZM1.944,698.95a1,1,0,0,1-.617-1.787C3.9,695.145,6.59,693.1,9.31,691.091A1,1,0,0,1,10.5,692.7c-2.706,2-5.377,4.031-7.939,6.038A1,1,0,0,1,1.944,698.95Zm15.88-12.18A1,1,0,0,1,17.188,685c2.538-2.089,5.054-4.291,7.478-6.544a1,1,0,0,1,1.362,1.465c-2.453,2.281-5,4.509-7.569,6.624A1,1,0,0,1,17.824,686.77Zm14.639-13.607a1,1,0,0,1-.723-1.691c2.266-2.372,4.506-4.856,6.658-7.383a1,1,0,1,1,1.523,1.3c-2.176,2.556-4.442,5.068-6.735,7.468A1,1,0,0,1,32.463,673.164Zm12.964-15.214a1,1,0,0,1-.8-1.605c1.983-2.607,3.938-5.324,5.809-8.074a1,1,0,1,1,1.653,1.125c-1.891,2.779-3.866,5.525-5.871,8.16A1,1,0,0,1,45.427,657.949ZM56.68,641.427a1,1,0,0,1-.853-1.52c1.7-2.8,3.376-5.7,4.971-8.621a1,1,0,1,1,1.756.958c-1.611,2.952-3.3,5.881-5.019,8.7A1,1,0,0,1,56.68,641.427Zm9.582-17.548a1,1,0,0,1-.9-1.439c1.436-2.942,2.839-5.983,4.172-9.039a1,1,0,1,1,1.833.8c-1.344,3.082-2.759,6.149-4.208,9.117A1,1,0,0,1,66.262,623.879Zm8-18.327a1,1,0,0,1-.932-1.362c1.185-3.052,2.338-6.2,3.424-9.35a1,1,0,0,1,1.891.652c-1.095,3.176-2.256,6.347-3.451,9.423A1,1,0,0,1,74.261,605.552Zm6.524-18.9a1,1,0,0,1-.957-1.291c.954-3.135,1.874-6.359,2.734-9.58a1,1,0,1,1,1.932.516c-.866,3.244-1.792,6.489-2.753,9.647A1,1,0,0,1,80.785,586.65Zm5.163-19.317a1,1,0,0,1-.975-1.226c.742-3.2,1.448-6.477,2.1-9.747a1,1,0,1,1,1.962.39c-.655,3.291-1.366,6.591-2.112,9.809A1,1,0,0,1,85.948,567.333Zm3.909-19.612a1,1,0,0,1-.987-1.166c.545-3.241,1.053-6.557,1.511-9.858a1,1,0,0,1,1.981.275c-.46,3.319-.971,6.655-1.519,9.915A1,1,0,0,1,89.857,547.722Zm2.751-19.81a1,1,0,0,1-1-1.11c.362-3.269.686-6.609.964-9.926a1,1,0,1,1,1.993.167c-.279,3.334-.605,6.692-.969,9.979A1,1,0,0,1,92.608,527.912Zm1.672-19.929-.059,0a1,1,0,0,1-.941-1.056c.19-3.288.342-6.641.452-9.965a1,1,0,0,1,2,.066c-.11,3.34-.263,6.71-.454,10.014A1,1,0,0,1,94.279,507.983ZM94.938,488H94.93a1,1,0,0,1-.991-1.009c.028-3.3.017-6.655-.033-9.977a1,1,0,0,1,2-.03c.051,3.337.062,6.71.033,10.024A1,1,0,0,1,94.938,488Zm-.3-20a1,1,0,0,1-1-.962c-.127-3.3-.295-6.654-.5-9.965a1,1,0,1,1,2-.123c.2,3.327.373,6.695.5,10.011A1,1,0,0,1,94.675,468Zm-1.227-19.96a1,1,0,0,1-1-.916c-.278-3.3-.6-6.639-.95-9.934a1,1,0,1,1,1.989-.213c.354,3.31.676,6.667.955,9.979a1,1,0,0,1-.913,1.08C93.465,448.036,93.437,448.038,93.409,448.038ZM91.28,428.15a1,1,0,0,1-.99-.871c-.427-3.285-.9-6.608-1.4-9.877a1,1,0,0,1,1.977-.3c.5,3.284.974,6.622,1.4,9.921a1,1,0,0,1-.993,1.129Zm-3.023-19.771a1,1,0,0,1-.984-.827c-.576-3.268-1.2-6.567-1.844-9.8a1,1,0,0,1,1.961-.392c.651,3.252,1.274,6.566,1.852,9.849a1,1,0,0,1-.986,1.174Zm-3.924-19.609a1,1,0,0,1-.975-.781c-.729-3.245-1.5-6.512-2.3-9.709A1,1,0,1,1,83,377.8c.8,3.213,1.581,6.5,2.314,9.756a1,1,0,0,1-.977,1.219Zm-4.85-19.4a1,1,0,0,1-.963-.734c-.888-3.214-1.824-6.439-2.782-9.587a1,1,0,1,1,1.913-.582c.963,3.164,1.9,6.406,2.8,9.636a1,1,0,0,1-.964,1.267Zm-5.824-19.132a1,1,0,0,1-.948-.684c-1.058-3.17-2.166-6.34-3.292-9.421a1,1,0,0,1,1.878-.687c1.133,3.1,2.247,6.287,3.311,9.475a1,1,0,0,1-.949,1.317Zm-6.871-18.78a1,1,0,0,1-.929-.629c-1.244-3.112-2.54-6.208-3.852-9.2a1,1,0,0,1,1.832-.8c1.32,3.015,2.624,6.132,3.877,9.264a1,1,0,0,1-.928,1.372Zm-8.027-18.318a1,1,0,0,1-.9-.568c-1.453-3.029-2.96-6.024-4.478-8.9a1,1,0,0,1,1.769-.933c1.53,2.9,3.049,5.92,4.513,8.972a1,1,0,0,1-.9,1.433Zm-9.343-17.688a1,1,0,0,1-.865-.5c-1.694-2.909-3.443-5.762-5.2-8.479a1,1,0,1,1,1.679-1.086c1.774,2.743,3.54,5.623,5.25,8.559a1,1,0,0,1-.863,1.5ZM38.55,278.688a1,1,0,0,1-.811-.413c-1.984-2.738-4.027-5.387-6.072-7.874a1,1,0,0,1,1.545-1.27c2.071,2.519,4.139,5.2,6.147,7.971a1,1,0,0,1-.809,1.587ZM25.825,263.266a1,1,0,0,1-.725-.312c-2.331-2.456-4.723-4.78-7.11-6.906a1,1,0,0,1,1.33-1.493c2.428,2.163,4.861,4.526,7.23,7.023a1,1,0,0,1-.725,1.688ZM10.881,250.025a1,1,0,0,1-.587-.191l-.112-.081c-2.716-1.965-5.372-3.977-7.9-5.982a1,1,0,0,1,1.244-1.566c2.5,1.986,5.132,3.981,7.824,5.928l.114.083a1,1,0,0,1-.588,1.809ZM-4.767,237.568a1,1,0,0,1-.661-.25c-2.555-2.255-5.028-4.566-7.35-6.869a1,1,0,0,1-.006-1.414,1,1,0,0,1,1.414-.006c2.294,2.276,4.738,4.56,7.265,6.789a1,1,0,0,1,.088,1.412A1,1,0,0,1-4.767,237.568Zm-14.165-14.087a1,1,0,0,1-.75-.338c-2.26-2.559-4.41-5.182-6.392-7.8a1,1,0,0,1,.193-1.4,1,1,0,0,1,1.4.193c1.952,2.575,4.071,5.159,6.3,7.681a1,1,0,0,1-.088,1.412A1,1,0,0,1-18.932,223.481Zm-12.049-15.946a1,1,0,0,1-.846-.465c-1.821-2.875-3.5-5.821-5-8.759a1,1,0,0,1,.436-1.345,1,1,0,0,1,1.345.436c1.47,2.882,3.123,5.775,4.911,8.6a1,1,0,0,1-.31,1.38A1,1,0,0,1-30.981,207.535Zm-9.049-17.8a1,1,0,0,1-.932-.638,94.5,94.5,0,0,1-3.151-9.6,1,1,0,0,1,.706-1.226,1,1,0,0,1,1.226.706,92.5,92.5,0,0,0,3.084,9.395,1,1,0,0,1-.57,1.294A1,1,0,0,1-40.03,189.737Zm-5.183-19.276a1,1,0,0,1-.987-.848,92.574,92.574,0,0,1-.985-10.055,1,1,0,0,1,.956-1.042,1,1,0,0,1,1.042.956,90.581,90.581,0,0,0,.964,9.836,1,1,0,0,1-.836,1.141A1.009,1.009,0,0,1-45.213,170.461Zm-.872-19.941-.063,0a1,1,0,0,1-.936-1.06c.206-3.3.586-6.677,1.129-10.031a1,1,0,0,1,1.147-.827,1,1,0,0,1,.827,1.147c-.533,3.29-.906,6.6-1.108,9.835A1,1,0,0,1-46.085,150.52Zm3.166-19.718a1,1,0,0,1-.249-.031,1,1,0,0,1-.721-1.217c.814-3.182,1.789-6.43,2.9-9.652a1,1,0,0,1,1.271-.62,1,1,0,0,1,.62,1.271c-1.091,3.172-2.05,6.367-2.851,9.5A1,1,0,0,1-42.919,130.8Zm6.469-18.9a1,1,0,0,1-.392-.08,1,1,0,0,1-.527-1.312c1.285-3.012,2.715-6.081,4.249-9.121a1,1,0,0,1,1.343-.442,1,1,0,0,1,.442,1.343c-1.515,3-2.926,6.032-4.195,9.005A1,1,0,0,1-36.45,111.9Zm8.982-17.856a1,1,0,0,1-.5-.134,1,1,0,0,1-.365-1.366c1.638-2.834,3.406-5.716,5.253-8.568a1,1,0,0,1,1.383-.3,1,1,0,0,1,.3,1.383c-1.829,2.823-3.579,5.677-5.2,8.481A1,1,0,0,1-27.467,94.042Zm10.856-16.789a1,1,0,0,1-.58-.186,1,1,0,0,1-.232-1.395c1.9-2.666,3.925-5.373,6.006-8.047a1,1,0,0,1,1.4-.175,1,1,0,0,1,.175,1.4c-2.064,2.652-4.068,5.338-5.957,7.982A1,1,0,0,1-16.611,77.253Zm12.27-15.789a1,1,0,0,1-.642-.234,1,1,0,0,1-.123-1.409C-3,57.307-.781,54.76,1.477,52.249a1,1,0,1,1,1.487,1.337C.721,56.08-1.479,58.611-3.575,61.107A1,1,0,0,1-4.341,61.464ZM9.024,46.588A1,1,0,0,1,8.3,44.9c2.277-2.378,4.646-4.781,7.043-7.142a1,1,0,1,1,1.4,1.425c-2.383,2.348-4.739,4.736-7,7.1A1,1,0,0,1,9.024,46.588ZM23.267,32.549a1,1,0,0,1-.682-1.731c2.419-2.256,4.917-4.523,7.424-6.74a1,1,0,1,1,1.325,1.5c-2.494,2.205-4.979,4.461-7.385,6.7A1,1,0,0,1,23.267,32.549ZM38.248,19.3a1,1,0,0,1-.643-1.766c2.563-2.152,5.175-4.287,7.762-6.347a1,1,0,1,1,1.246,1.565c-2.574,2.049-5.172,4.173-7.722,6.314A1,1,0,0,1,38.248,19.3ZM53.894,6.853a1,1,0,0,1-.6-1.8C58.32,1.279,61.41-.808,61.441-.829a1,1,0,0,1,1.388.27,1,1,0,0,1-.27,1.388c-.03.02-3.084,2.083-8.065,5.823A1,1,0,0,1,53.894,6.853Z"
                  transform="translate(824.5 108.5)"
                />
              </g>
            </svg>
          </div>
          <div className="login__img">
            <img src={pic} alt="login" />
          </div>
        </div>
      </>
    );
  }
}

export default Login;
